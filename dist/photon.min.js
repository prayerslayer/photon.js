/*! Photon v1.0.0 | (c) 2013 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a){"use strict";var b=a.document;a.Photon=function(a,c){a||(a="img"),c||(c={});var d,e,f,g,h,i=!1,j=0,k=b.querySelectorAll(a);return console.debug(k),{display:function(){d.src=k[j].src;var a="#"+(j+1)+" / "+k.length,b=k[j].attributes.alt;b&&b.value&&(a+=": "+b.value),g.innerText=a},stop:function(){},start:function(){var a=this;f=b.createElement("div"),f.classList.add("photon-box"),f.classList.add("photon-box_invisible"),b.body.insertBefore(f,b.body.firstChild),b.body.addEventListener("keydown",function(b){if(i){var c=0;37===b.keyCode?c=-1:39===b.keyCode&&(c=1),0!==c&&(j+=c,j=0>j?j+k.length:j%k.length,a.display(j))}}),h=b.createElement("div"),h.classList.add("photon-box__background"),f.appendChild(h),h.addEventListener("click",function(){f.classList.add("photon-box_invisible"),i=!1}),e=b.createElement("figure"),f.appendChild(e),d=b.createElement("img"),d.classList.add("photon-box__image"),e.appendChild(d),g=b.createElement("figcaption"),g.classList.add("photon-box__caption"),e.appendChild(g);for(var c=function(){console.debug("clicked",this.src),i=!0,f.classList.remove("photon-box_invisible");var b=parseInt(this.attributes["data-photon-index"]);a.display(b)},l=k.length-1;l>=0;l--){var m=k[l];m.addEventListener("click",c),m.attributes["data-photon-index"]=l}}}}}(window);