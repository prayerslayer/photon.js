/*! Photon v1.0.0 | (c) 2013 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a,b){"use strict";var c=a.document;a.Photon=function(a,d){a||(a="img"),d||(d={}),d.caption=d.caption===b?!0:d.caption;var e,f,g,h,i,j,k=!1,l=0,m=c.querySelectorAll(a);return console.debug(m),{display:function(a){if(e.src=m[a].src,d.caption){var b="#"+(a+1)+" / "+m.length,c=m[a].attributes.alt;c&&c.value&&(b+=": "+c.value),h.innerText=b}},stop:function(){document.body.removeChild(g);for(var a=m.length-1;a>=0;a--)m[a].removeEventListener("click",j),m[a].removeAttribute("data-photon-index")},start:function(){var a=this;g=c.createElement("div"),g.classList.add("photon-box"),g.classList.add("photon-box_invisible"),c.body.insertBefore(g,c.body.firstChild),c.body.addEventListener("keydown",function(b){if(k){var c=0;37===b.keyCode?c=-1:39===b.keyCode&&(c=1),0!==c&&(l+=c,l=0>l?l+m.length:l%m.length,a.display(l))}}),i=c.createElement("div"),i.classList.add("photon-box__background"),g.appendChild(i),i.addEventListener("click",function(){g.classList.add("photon-box_invisible"),k=!1}),f=c.createElement("figure"),g.appendChild(f),e=c.createElement("img"),e.classList.add("photon-box__image"),f.appendChild(e),d.caption&&(h=c.createElement("figcaption"),h.classList.add("photon-box__caption"),f.appendChild(h)),j=function(){console.debug("clicked",this.src),k=!0,g.classList.remove("photon-box_invisible"),l=parseInt(this.attributes["data-photon-index"]),a.display(l)};for(var b=m.length-1;b>=0;b--){var n=m[b];n.addEventListener("click",j),n.setAttribute("data-photon-index",b)}}}}}(window,void 0);