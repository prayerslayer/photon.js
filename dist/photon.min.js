/*! Photon v1.0.0 | (c) 2014 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a,b){"use strict";a.Photon=function(c,d){var e={classList:a.document.documentElement.classList,addClass:function(a,b){this.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){this.classList?a.classList.remove(b):this.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(^|\\s)*"+b+"(\\s|$)*","g"),""))},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a[b]=null}};c||(c="img"),d||(d={}),d.caption=d.caption===b?!0:d.caption,d.emptyCaptionText=d.emptyCaptionText===b?"No caption":d.emptyCaptionText;var f,g,h,i,j,k,l,m,n,o,p=!1,q=0,r=a.document.querySelectorAll(c);return{display:function(a){f.src="";var b=r[a].attributes["data-photon-fullsize"];if(f.src=b?b.value:r[a].attributes.src.value,d.caption){var c="",e=r[a].attributes.alt;c=e&&e.value?e.value:d.emptyCaptionText,i.textContent=c}},stop:function(){a.document.body.removeChild(h),e.removeEvent(a.document.body,n);for(var b=r.length-1;b>=0;b--)e.removeEvent(r[b],"click",m),r[b].removeAttribute("data-photon-index");a=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,r=null},start:function(){var b=this;h=a.document.createElement("div"),e.addClass(h,"photon-box"),e.addClass(h,"photon-box_invisible"),a.document.body.insertBefore(h,a.document.body.firstChild),n=function(a){if(p){if(27===a.keyCode)return o(),void 0;var c=0;37===a.keyCode?c=-1:39===a.keyCode&&(c=1),0!==c&&(q+=c,q=0>q?q+r.length:q%r.length,b.display(q))}},e.addEvent(a.document.body,"keydown",n),j=a.document.createElement("div"),e.addClass(j,"photon-box__background"),h.appendChild(j),o=function(){e.addClass(h,"photon-box_invisible"),p=!1},e.addEvent(j,"click",o),g=a.document.createElement("figure"),h.appendChild(g),f=a.document.createElement("img"),e.addClass(f,"photon-box__image"),g.appendChild(f),d.caption&&(i=a.document.createElement("figcaption"),e.addClass(i,"photon-box__caption"),g.appendChild(i));var c=function(a){return function(){q+=a,q=0>q?q+r.length:q%r.length,b.display(q)}};k=a.document.createElement("div"),k.textContent="⟵",e.addClass(k,"photon-box__previous"),h.appendChild(k),e.addEvent(k,"click",c(-1)),l=a.document.createElement("div"),l.textContent="⟶",e.addClass(l,"photon-box__next"),h.appendChild(l),e.addEvent(l,"click",c(1)),c=null,m=function(){p=!0,e.removeClass(h,"photon-box_invisible"),q=parseInt(this.attributes["data-photon-index"].value),b.display(q)};for(var s=r.length-1;s>=0;s--)e.addEvent(r[s],"click",m),r[s].setAttribute("data-photon-index",s)}}}}(window,void 0);