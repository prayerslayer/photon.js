/*! Photon v1.0.0 | (c) 2013 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a,b){"use strict";var c=a.document;a.Photon=function(a,d){a||(a="img"),d||(d={}),d.caption=d.caption===b?!0:d.caption;var e,f,g,h,i,j=!1,k=0,l=c.querySelectorAll(a);return console.debug(l),{display:function(){if(e.src=l[k].src,d.caption){var a="#"+(k+1)+" / "+l.length,b=l[k].attributes.alt;b&&b.value&&(a+=": "+b.value),h.innerText=a}},stop:function(){},start:function(){var a=this;g=c.createElement("div"),g.classList.add("photon-box"),g.classList.add("photon-box_invisible"),c.body.insertBefore(g,c.body.firstChild),c.body.addEventListener("keydown",function(b){if(j){var c=0;37===b.keyCode?c=-1:39===b.keyCode&&(c=1),0!==c&&(k+=c,k=0>k?k+l.length:k%l.length,a.display(k))}}),i=c.createElement("div"),i.classList.add("photon-box__background"),g.appendChild(i),i.addEventListener("click",function(){g.classList.add("photon-box_invisible"),j=!1}),f=c.createElement("figure"),g.appendChild(f),e=c.createElement("img"),e.classList.add("photon-box__image"),f.appendChild(e),d.caption&&(h=c.createElement("figcaption"),h.classList.add("photon-box__caption"),f.appendChild(h));for(var b=function(){console.debug("clicked",this.src),j=!0,g.classList.remove("photon-box_invisible");var b=parseInt(this.attributes["data-photon-index"]);a.display(b)},m=l.length-1;m>=0;m--){var n=l[m];n.addEventListener("click",b),n.attributes["data-photon-index"]=m}}}}}(window,void 0);