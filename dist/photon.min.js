/*! Photon v1.0.0 | (c) 2013 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a,b){"use strict";var c=a.document;a.Photon=function(d,e){d||(d="img"),e||(e={});var f={classList:a.document.documentElement.classList,addClass:function(a,b){this.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){this.classList?a.classList.remove(b):this.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(^|\\s)*"+b+"(\\s|$)*","g"),""))},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a[b]=null}};e.caption=e.caption===b?!0:e.caption;var g,h,i,j,k,l,m=!1,n=0,o=c.querySelectorAll(d);return console.debug(o),{display:function(a){if(g.src="",g.src=o[a].src,e.caption){var b="#"+(a+1)+" / "+o.length,c=o[a].attributes.alt;c&&c.value&&(b+=": "+c.value),j.textContent=b}},stop:function(){document.body.removeChild(i);for(var a=o.length-1;a>=0;a--)f.removeEvent(o[a],"click",l),o[a].removeAttribute("data-photon-index")},start:function(){var a=this;i=c.createElement("div"),i.classList.add("photon-box"),i.classList.add("photon-box_invisible"),c.body.insertBefore(i,c.body.firstChild),c.body.addEventListener("keydown",function(b){if(m){var c=0;37===b.keyCode?c=-1:39===b.keyCode&&(c=1),0!==c&&(n+=c,n=0>n?n+o.length:n%o.length,a.display(n))}}),k=c.createElement("div"),f.addClass(k,"photon-box__background"),i.appendChild(k),f.addEvent(k,"click",function(){f.addClass(i,"photon-box_invisible"),m=!1}),h=c.createElement("figure"),i.appendChild(h),g=c.createElement("img"),f.addClass(g,"photon-box__image"),h.appendChild(g),e.caption&&(j=c.createElement("figcaption"),f.addClass(j,"photon-box__caption"),h.appendChild(j)),l=function(){console.debug("clicked",this.src),m=!0,f.removeClass(i,"photon-box_invisible"),n=parseInt(this.attributes["data-photon-index"].value),a.display(n)};for(var b=o.length-1;b>=0;b--){var d=o[b];f.addEvent(d,"click",l),d.setAttribute("data-photon-index",b)}}}}}(window,void 0);