/*! Photon v1.0.0 | (c) 2013 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a,b){"use strict";var c=a.document;a.Photon=function(d,e){d||(d="img"),e||(e={});var f={classList:a.document.documentElement.classList,addClass:function(a,b){this.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){this.classList?a.classList.remove(b):this.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(^|\\s)*"+b+"(\\s|$)*","g"),""))},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a[b]=null}};e.caption=e.caption===b?!0:e.caption,e.emptyCaptionText=e.emptyCaptionText===b?"No caption":e.emptyCaptionText;var g,h,i,j,k,l,m,n,o,p,q=!1,r=0,s=c.querySelectorAll(d);return console.debug(s),{display:function(a){if(g.src="",g.src=s[a].src,e.caption){var b="",c=s[a].attributes.alt;b=c&&c.value?c.value:e.emptyCaptionText,j.textContent=b}},stop:function(){document.body.removeChild(i),f.removeEvent(c.body,o);for(var a=s.length-1;a>=0;a--)f.removeEvent(s[a],"click",n),s[a].removeAttribute("data-photon-index")},start:function(){var a=this;i=c.createElement("div"),f.addClass(i,"photon-box"),f.addClass(i,"photon-box_invisible"),c.body.insertBefore(i,c.body.firstChild),o=function(b){if(q){if(27===b.keyCode)return p(),void 0;var c=0;37===b.keyCode?c=-1:39===b.keyCode&&(c=1),0!==c&&(r+=c,r=0>r?r+s.length:r%s.length,a.display(r))}},f.addEvent(c.body,"keydown",o),k=c.createElement("div"),f.addClass(k,"photon-box__background"),i.appendChild(k),p=function(){f.addClass(i,"photon-box_invisible"),q=!1},f.addEvent(k,"click",p),h=c.createElement("figure"),i.appendChild(h),g=c.createElement("img"),f.addClass(g,"photon-box__image"),h.appendChild(g),e.caption&&(j=c.createElement("figcaption"),f.addClass(j,"photon-box__caption"),h.appendChild(j));var b=function(b){return function(){r+=b,r=0>r?r+s.length:r%s.length,a.display(r)}};l=c.createElement("div"),l.textContent="⟵",f.addClass(l,"photon-box__previous"),i.appendChild(l),f.addEvent(l,"click",b(-1)),m=c.createElement("div"),m.textContent="⟶",f.addClass(m,"photon-box__next"),i.appendChild(m),f.addEvent(m,"click",b(1)),n=function(){console.debug("clicked",this.src),q=!0,f.removeClass(i,"photon-box_invisible"),r=parseInt(this.attributes["data-photon-index"].value),a.display(r)};for(var d=s.length-1;d>=0;d--){var t=s[d];f.addEvent(t,"click",n),t.setAttribute("data-photon-index",d)}}}}}(window,void 0);