/*! Photon v1.0.0 | (c) 2014 @prayerslayer | MIT license | github.com/prayerslayer/photon */
!function(a){"use strict";a.fn.Photon=function(b){function c(c){h.src="";var d=a(r[c]),e=d.attr("data-photon-fullsize");if(e?h.attr("src",e):h.attr("src",d.attr("src")),b.caption){var f="",g=d.attr("title")||d.attr("alt");f=g?g:b.emptyCaptionText,k.text(f)}}function d(a){return function(){p+=a,p=0>p?p+q:p%q,c(p)}}function e(){j.addClass("photon-box_invisible"),o=!1}function f(a){if(o){if(27===a.keyCode)return e(),void 0;var b=0;37===a.keyCode?b=-1:39===a.keyCode&&(b=1),0!==b&&(p+=b,p=0>p?p+q:p%q,c(p))}}function g(){o=!0,j.removeClass("photon-box_invisible"),p=parseInt(a(this).data("photon-index")),c(p)}if(0!==this.size()){b||(b={}),b.caption=void 0===b.caption?!0:b.caption,b.emptyCaptionText=void 0===b.emptyCaptionText?"No caption":b.emptyCaptionText;var h,i,j,k,l,m,n,o=!1,p=0,q=this.size(),r=this,s=a("body ");j=a(document.createElement("div")),j.addClass("photon-box"),j.addClass("photon-box_invisible"),s.append(j),s.on("keydown",f),l=a(document.createElement("div")),l.addClass("photon-box__background"),j.append(l),l.on("click",e),i=a(document.createElement("figure")),j.append(i),h=a(document.createElement("img")),h.addClass("photon-box__image"),i.append(h),b.caption&&(k=a(document.createElement("figcaption")),k.addClass("photon-box__caption"),i.append(k)),m=a(document.createElement("div")),m.text("⟵"),m.addClass("photon-box__previous"),j.append(m),m.on("click",d(-1)),n=a(document.createElement("div")),n.text("⟶"),n.addClass("photon-box__next"),j.append(n),n.on("click",d(1)),this.each(function(b){var c=a(this);c.on("click",g),c.data("photon-index",b)})}}}(jQuery);